<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>舞台修復演出</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="https://raw.githubusercontent.com/J105588/video-nazuna/main/IMG_5316.png" type="image/png">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&family=Noto+Sans+JP:wght@300;400&display=swap');
  html, body { height: 100%; }
  body {
    margin:0; min-height:100vh; width:100vw; text-align:center; 
    font-family: 'Noto Serif JP', serif;
    background: #191716 url('https://www.transparenttextures.com/patterns/old-wall.png');
    color:#e5dabd; transition: background 1s cubic-bezier(.7,0,.3,1);
  }

  .center-old {
    max-width:420px; margin:9em auto;
    background:linear-gradient(170deg, #39301e 0%, #231e18 80%, #1b1611 100%);
    padding:2.8em 2em 2em;
    border-radius: 1.1em 0.7em 2em 1.6em/1.5em 1.7em 2.3em 1.2em;
    border: 2.3px solid #b79b6677;
    box-shadow:0 5px 52px #31231cbb, 0 0 90px 21px #190d06bb inset;
    clip-path: polygon(0 0, 100% 0, 100% 96%, 96% 100%, 88% 97%, 78% 100%, 70% 95%, 62% 98%, 55% 95%, 47% 100%, 38% 97%, 31% 100%, 21% 93%, 0% 100%);
    position: relative;
    filter: grayscale(0.18) sepia(0.10) brightness(0.92);
    animation: fadein-old 1.7s cubic-bezier(.2,.7,.4,1.3) both;
  }
  @keyframes fadein-old { from{opacity:0;filter:blur(30px);} to {opacity:1;filter:none;} }
  .center-old h1 { color:#b59854; font-size:2.1em; margin-bottom:.5em; letter-spacing:.09em;
    text-shadow:0 4px 11px #47370b40, 1px 1px 0 #665; }
  .center-old .note { color:#d2be91; font-size:1.18em; margin-bottom:2em; line-height:1.84; }
  .center-old button {
    background:linear-gradient(175deg, #9c8b49 0%, #493f14 98%);
    color:#eee1ab;font-size:1.24em; border:none;border-radius:10px 24px 12px 7px/19px 14px 17px 11px;
    padding:.8em 2.6em; font-weight:bold; box-shadow:0 2px 12px #0005, 0 0 0 2.5px #cfb16c88 inset;
    margin-top:1.3em; letter-spacing:.09em; user-select:none;
    transition: background 0.23s, color 0.19s, filter 0.18s;
    filter: grayscale(0.13) sepia(0.16);
    position:relative;
  }
  .center-old #msg { margin-top:1.3em; color:#eeb2a0; font-size:1em; letter-spacing:.03em;}

  /* グランジ汚れ */
  .grunge-corner { position:absolute;width:60px;height:45px;
    background: radial-gradient(ellipse 55% 25% at 76% 19%, #5d4625cc 43%, transparent 100%),
    radial-gradient(ellipse 36% 45% at 19% 63%, #96815442 42%, transparent 95%),
    radial-gradient(circle at 65% 72%, #502d0e33 8%, transparent 60%);
    opacity:0.44; pointer-events:none;
  }
  .grunge-corner.cc1{ top:0;left:0; } .grunge-corner.cc2{ top:0;right:0; } .grunge-corner.cc3{ left:0;bottom:0; } .grunge-corner.cc4{ right:0;bottom:0;}

  .sparkle {
    position: absolute;
    pointer-events: none;
    width: 13px; height: 13px;
    animation: sparkle 1.5s linear infinite;
    filter: blur(0.2px) drop-shadow(0 0 12px #fffbbb99);
    opacity: 0.85;
  }
  @keyframes sparkle { 
    0%{ opacity:0;}
    5%{ opacity:0.85; transform: scale(1.12) rotate(5deg);}
    40%{ opacity:0.7;}
    80%{ opacity:0;}
    100%{ opacity:0; }
  }

  /* ===== 豪華リッチ劇場デザイン ======== */
  body.restored {
    background:
      radial-gradient(ellipse at 50% 38%, #483108 32%, transparent 83%),
      linear-gradient(180deg, #f5e7b2 18%, #dccca1 34%, #7e6041 96%, #372619 100%);
    color: #fcf1d2;
    filter: none;
    transition: background 1.8s cubic-bezier(.6,0,.2,1);
  }
  .container-rich {
    display: block;
    max-width: 780px;
    margin: 6em auto 2em;
    background: 
      linear-gradient(180deg,#614513DD 0 7%,#f3e2b799 30%,#a68853CC 82%,#664721C9 100%),
      radial-gradient(ellipse 90% 55% at 52% 17%, #fff5c455 20%, #ffd13022 88%,transparent 100%);
    border-radius: 22px 46px 28px 13px/36px 23px 62px 17px;
    box-shadow: 0 0 0 8px #f6e99d25, 0 8px 48px 0px #b99b61cc, 0 0 0 110px #fff6c012 inset, 0 0 240px 57px #ece2c162 inset;
    border: 3px solid #f3e3adcc;
    padding: 3.0em 2.4em 2.3em;
    text-align:center;
    animation: fadein-rich 1.55s cubic-bezier(.36,1.3,.6,1.01) both;
    filter: drop-shadow(0 0 95px #fff7e422);
    position: relative;
    z-index:1;
  }
  @keyframes fadein-rich {
    0% { opacity:0; filter:blur(50px) brightness(1.5);}
    60% {opacity:.8;}
    95% {filter:blur(0px) brightness(1.08);}
    100% { opacity:1; filter:none;}
  }
  .container-rich h1 {
    color:#fff6cb;
    font-size:2.5em;
    letter-spacing:0.13em;
    margin-bottom: .2em;
    font-family: 'Noto Serif JP', serif;
    text-shadow:
      0 0 18px #fee84d77,
      0 1px #744d17,
      0 2px 12px #c3972fbb;
    font-weight:700;
  }
  .container-rich .subtitle {
    font-size:1.25em;
    color:#c19946;
    margin-top:.8em;
    margin-bottom: .8em;
    letter-spacing: 0.06em;
    text-shadow:0 2px 7px #fffabc61;
    font-family: 'Noto Serif JP', serif;
  }
  .goldbar {
    display:block;
    width: 150px; height:6px;
    background:linear-gradient(90deg,#fff8e1 0 13%,#d4af37 54%,#aa7f24 98%);
    border-radius: 8px;
    margin:2em auto 2.3em;
    opacity:0.81;
    filter: blur(.5px);
    box-shadow:0 0 30px #ffe7a59a;
  }
  .video-wrapper {
    position:relative; width:100%; max-width:512px; margin:2.6em auto 2.3em;
    border-radius:13px; overflow: hidden; box-shadow: 0 5px 32px #b59b6177;
    background: #20160a;
    border:1.5px solid #fff7bc88;
  }
  video {
    width:100%; height:auto; display: block; background:#000;
    border-radius:10px;
    box-shadow:0 0 45px #ffeeaa12;
  }
  .copyright {
    font-size: 14px; color:#a89564;
    text-align:center; margin-top:2.8em; letter-spacing:0.10em;
    text-shadow:0 0 18px #ede9e033;
  }
  /* キラキラパーティクル */
  .particles {
    position:fixed; z-index:5; left:0; top:0; width:100vw; height:100vh; pointer-events:none;
    overflow:hidden; pointer-events:none;
  }
  .particle {
    position:absolute; border-radius:50%; opacity:0.78;
    pointer-events:none;
    background:radial-gradient(circle,#fffcc0 1%,#f4e0ac 60%,rgba(248,231,28,0) 89%);
    animation: particle-move 2.9s linear forwards;
    filter: blur(.4px) drop-shadow(0 0 22px #fff3bb66);
    z-index:51;
  }
  @keyframes particle-move {
    0% { opacity:0.02; transform:scale(0.12);}
    15% { opacity:0.85; }
    80% { opacity:0.60; }
    98% { opacity:0.01;}
    100% { opacity:0.01;}
  }
</style>
</head>
<body>
  <!-- 荒廃ページ -->
  <div class="center-old" id="ruined">
    <div class="grunge-corner cc1"></div>
    <div class="grunge-corner cc2"></div>
    <div class="grunge-corner cc3"></div>
    <div class="grunge-corner cc4"></div>
    <h1>舞台の灯</h1>
    <div class="note">
      かつての光を失った劇場。<br>
      だが今宵、三つの灯が集い、<br>
      再び舞台に命が吹きこまれる。
    </div>
    <button id="restoreBtn">舞台を修復する</button>
    <div id="msg"></div>
  </div>

  <!-- 豪華修復後 -->
  <div class="container-rich" id="rich" style="display:none;">
    <h1>動画公開ページ</h1>
    <div class="subtitle">新たな光に包まれて——<br>劇場はふたたび輝きを取り戻した！</div>
    <span class="goldbar"></span>
    <div class="video-wrapper">
      <video controls poster="test-video-yozora.jpg">
        <source src="test-yozora.mp4" type="video/mp4">
        お使いのブラウザは動画タグに対応していません。
      </video>
    </div>
    <div class="copyright">© 2025 NAZUNA ENGEKI5</div>
  </div>
  <div class="particles" id="particles"></div>

  <script>
    // パーティクル演出
    function spawnParticles(){
      const p = document.getElementById('particles');
      for(let i=0;i<48;++i){
        let el = document.createElement('span');
        el.className = 'particle';
        let x = Math.random()*100, y = Math.random()*100, s = 4+8*Math.random();
        el.style.left = x+'vw';
        el.style.top = y+'vh';
        el.style.width = s+'px';
        el.style.height = s+'px';
        el.style.animationDuration = `${2.5+Math.random()*1.4}s`;
        p.appendChild(el);
        setTimeout(()=>el.remove(), 3300);
      }
    }
    document.getElementById('restoreBtn').onclick = ()=>{
      // 修復アニメ
      document.body.classList.add('restored');
      document.getElementById('ruined').style.display="none";
      document.getElementById('rich').style.display="block";
      spawnParticles();
      setTimeout(spawnParticles, 1400); // 2回目キラ
      setTimeout(function(){
        window.location.href = "curtain.html";
    };

    // 自動で修復（デモ用：現場ではbtn.click()の代わりに外部トリガでOK）
    // setTimeout(()=>document.getElementById('restoreBtn').click(), 3200);
  </script>
</body>
</html>
